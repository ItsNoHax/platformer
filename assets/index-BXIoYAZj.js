(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const n=document.getElementById("gameCanvas"),o=n.getContext("2d"),e={x:100,y:260,width:32,height:64,vx:0,vy:0,speed:2,jumpPower:-7,onGround:!1,frameIndex:0,frameTimer:0,facing:1,isWalking:!1,state:"idle"},k=.3,h=new Image;h.src="/assets/ninja_full.png";const u={row:0,col:0,frames:1,frameRate:1,width:32,height:64},w={row:0,col:1,frames:6,frameRate:10,width:32,height:64},g={row:0,col:7,frames:3,frameRate:8,width:32,height:64},y={row:1,col:0,frames:1,frameRate:1,width:32,height:64},p={row:1,col:7,frames:3,frameRate:8,width:32,height:64},a={};window.addEventListener("keydown",t=>a[t.key]=!0);window.addEventListener("keyup",t=>a[t.key]=!1);function A(){e.isWalking=!1,a.ArrowDown||a.s?e.vx=0:a.ArrowLeft||a.a?(e.vx=-2,e.facing=-1,e.isWalking=!0):a.ArrowRight||a.d?(e.vx=e.speed,e.facing=1,e.isWalking=!0):e.vx=0,(a.ArrowUp||a.w||a[" "])&&e.onGround&&(e.vy=e.jumpPower,e.onGround=!1),e.vy+=k,e.x+=e.vx,e.y+=e.vy,e.y+e.height>=n.height-20&&(e.y=n.height-20-e.height,e.vy=0,e.onGround=!0);const c=e.width*1.5;e.x<0?(e.x=0,e.vx=0):e.x+c>n.width&&(e.x=n.width-c,e.vx=0),e.onGround?a.ArrowDown||a.s?e.state="crouch":e.isWalking?e.state="walk":e.state==="crouch"&&!(a.ArrowDown||a.s)?e.state="stand":e.state="idle":e.state="jump";let s;switch(e.state){case"walk":s=w;break;case"crouch":s=g;break;case"stand":s=y;break;case"jump":s=p;break;default:s=u}e.frameTimer++,e.state==="crouch"?e.frameIndex<s.frames-1&&e.frameTimer>=60/s.frameRate&&(e.frameIndex++,e.frameTimer=0):e.frameTimer>=60/s.frameRate&&(e.frameIndex=(e.frameIndex+1)%s.frames,e.frameTimer=0),e.state==="idle"&&(e.frameIndex=0,e.frameTimer=0)}function I(){o.clearRect(0,0,n.width,n.height),o.fillStyle="#444",o.fillRect(0,n.height-60,n.width,60);let t;switch(e.state){case"walk":t=w;break;case"crouch":t=g;break;case"stand":t=y;break;case"jump":t=p;break;default:t=u}let c=(t.col+e.frameIndex)*t.width,s=t.row*t.height,d=t.width,r=t.height;const i=1.5,f=e.height*i,l=e.width*i,m=e.x,v=e.y+e.height-f;o.save(),e.facing===-1&&(o.translate(m+l/2,0),o.scale(-1,1),o.translate(-m-l/2,0)),o.drawImage(h,c,s,d,r,m,v,l,f),o.restore()}function x(){A(),I(),requestAnimationFrame(x)}h.onload=()=>{x()};
