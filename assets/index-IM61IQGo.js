(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function F(){return{x:100,y:260,width:32,height:64,vx:0,vy:0,speed:2,jumpPower:-7,onGround:!1,frameIndex:0,frameTimer:0,facing:1,isWalking:!1,state:"idle"}}const b={row:0,col:0,frames:1,frameRate:1,width:32,height:64},A={row:0,col:1,frames:6,frameRate:10,width:32,height:64},L={row:0,col:7,frames:3,frameRate:8,width:32,height:64},R={row:1,col:0,frames:1,frameRate:1,width:32,height:64},T={row:1,col:7,frames:3,frameRate:8,width:32,height:64},c={};function U(){window.addEventListener("keydown",a=>c[a.key]=!0),window.addEventListener("keyup",a=>c[a.key]=!1)}const w=()=>c.ArrowDown||c.s,W=()=>c.ArrowUp||c.w||c[" "],K=()=>c.ArrowLeft||c.a,G=()=>c.ArrowRight||c.d;function N(a,i){const r=(a.col+i)*a.width,d=a.row*a.height,s=a.width,o=a.height;return[r,d,s,o]}const S="/platformer/assets/ninja_full.png",z="/platformer/assets/Clouds3/1.png",B="/platformer/assets/Clouds3/2.png",D="/platformer/assets/Clouds3/3.png",M="/platformer/assets/Clouds3/4.png",t=document.getElementById("gameCanvas"),n=t.getContext("2d"),e=F(),q=.3,p=new Image;p.src=S;const y=new Image;y.src=z;const x=new Image;x.src=B;const l=new Image;l.src=D;const m=new Image;m.src=M;function X(){e.isWalking=!1,w()?e.vx=0:K()?(e.vx=-2,e.facing=-1,e.isWalking=!0):G()?(e.vx=e.speed,e.facing=1,e.isWalking=!0):e.vx=0,W()&&e.onGround&&(e.vy=e.jumpPower,e.onGround=!1),e.vy+=q,e.x+=e.vx,e.y+=e.vy,e.y+e.height>=t.height-10&&(e.y=t.height-10-e.height,e.vy=0,e.onGround=!0);const i=e.width*1.5;e.x<0?(e.x=0,e.vx=0):e.x+i>t.width&&(e.x=t.width-i,e.vx=0),e.onGround?w()?e.state="crouch":e.isWalking?e.state="walk":e.state==="crouch"&&!w()?e.state="stand":e.state="idle":e.state="jump";let r;switch(e.state){case"walk":r=A;break;case"crouch":r=L;break;case"stand":r=R;break;case"jump":r=T;break;default:r=b}e.frameIndex>r.frames-1&&(e.frameIndex=r.frames-1),e.frameTimer++,e.state==="crouch"?e.frameIndex<r.frames-1&&e.frameTimer>=60/r.frameRate&&(e.frameIndex++,e.frameTimer=0):e.frameTimer>=60/r.frameRate&&(e.frameIndex=(e.frameIndex+1)%r.frames,e.frameTimer=0),e.state==="idle"&&(e.frameIndex=0,e.frameTimer=0)}function _(){n.clearRect(0,0,t.width,t.height),n.drawImage(y,0,0,t.width,t.height);const a=e.x*.1%t.width;n.drawImage(m,-a,0,t.width,t.height),n.drawImage(m,t.width-a,0,t.width,t.height);const i=e.x*.15%t.width,r=3;n.drawImage(x,t.width*.5-i,t.height*.1/r,t.width*.3*r,t.height*.3*r);const d=e.x*.3%t.width;n.drawImage(l,-d,0,t.width,t.height),n.drawImage(l,t.width-d,0,t.width,t.height),n.fillStyle="#222",n.fillRect(0,t.height-10,t.width,10);let s;switch(e.state){case"walk":s=A;break;case"crouch":s=L;break;case"stand":s=R;break;case"jump":s=T;break;default:s=b}const[o,f,j,C]=N(s,e.frameIndex),I=1.5,v=e.height*I,h=e.width*I,u=e.x,E=e.y+e.height-v;n.save(),e.facing===-1&&(n.translate(u+h/2,0),n.scale(-1,1),n.translate(-u-h/2,0)),n.drawImage(p,o,f,j,C,u,E,h,v),n.restore()}const k=1/60;let P=performance.now(),g=0;function O(a=performance.now()){for(g+=Math.min((a-P)/1e3,.25),P=a;g>=k;)X(),g-=k;_(),requestAnimationFrame(O)}async function H(){const a=[p,y,x,l,m];await Promise.all(a.map(i=>new Promise(r=>{i.complete?r():i.onload=()=>r()})))}async function Y(){U(),await H(),O()}Y();
