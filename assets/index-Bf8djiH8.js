(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function c(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=c(r);fetch(r.href,o)}})();function U(){return{x:100,y:260,width:32,height:64,vx:0,vy:0,speed:2,jumpPower:-7,onGround:!1,frameIndex:0,frameTimer:0,facing:1,isWalking:!1,state:"idle"}}const k={row:0,col:0,frames:1,frameRate:1,width:32,height:64},P={row:0,col:1,frames:6,frameRate:10,width:32,height:64},b={row:0,col:7,frames:3,frameRate:8,width:32,height:64},A={row:1,col:0,frames:1,frameRate:1,width:32,height:64},L={row:1,col:7,frames:3,frameRate:8,width:32,height:64},d={};function W(){window.addEventListener("keydown",s=>d[s.key]=!0),window.addEventListener("keyup",s=>d[s.key]=!1)}const w=()=>d.ArrowDown||d.s,F=()=>d.ArrowUp||d.w||d[" "],K=()=>d.ArrowLeft||d.a,T=()=>d.ArrowRight||d.d;function G(s,i){const c=(s.col+i)*s.width,a=s.row*s.height,r=s.width,o=s.height;return[c,a,r,o]}const N="/platformer/assets/ninja_full.png",E="/platformer/assets/Clouds3/1.png",S="/platformer/assets/Clouds3/2.png",z="/platformer/assets/Clouds3/3.png",B="/platformer/assets/Clouds3/4.png",t=document.getElementById("gameCanvas"),n=t.getContext("2d"),e=U(),q=.3,g=new Image;g.src=N;const p=new Image;p.src=E;const y=new Image;y.src=S;const l=new Image;l.src=z;const m=new Image;m.src=B;function D(s){e.isWalking=!1,w()?e.vx=0:K()?(e.vx=-2,e.facing=-1,e.isWalking=!0):T()?(e.vx=e.speed,e.facing=1,e.isWalking=!0):e.vx=0,F()&&e.onGround&&(e.vy=e.jumpPower,e.onGround=!1),e.vy+=q*s*60,e.x+=e.vx*s*60,e.y+=e.vy*s*60,e.y+e.height>=t.height-10&&(e.y=t.height-10-e.height,e.vy=0,e.onGround=!0);const c=e.width*1.5;e.x<0?(e.x=0,e.vx=0):e.x+c>t.width&&(e.x=t.width-c,e.vx=0),e.onGround?w()?e.state="crouch":e.isWalking?e.state="walk":e.state==="crouch"&&!w()?e.state="stand":e.state="idle":e.state="jump";let a;switch(e.state){case"walk":a=P;break;case"crouch":a=b;break;case"stand":a=A;break;case"jump":a=L;break;default:a=k}e.frameIndex>a.frames-1&&(e.frameIndex=a.frames-1),e.frameTimer+=s*60,e.state==="crouch"?e.frameIndex<a.frames-1&&e.frameTimer>=60/a.frameRate&&(e.frameIndex++,e.frameTimer=0):e.frameTimer>=60/a.frameRate&&(e.frameIndex=(e.frameIndex+1)%a.frames,e.frameTimer=0),e.state==="idle"&&(e.frameIndex=0,e.frameTimer=0)}function M(){n.clearRect(0,0,t.width,t.height),n.drawImage(p,0,0,t.width,t.height);const s=e.x*.1%t.width;n.drawImage(m,-s,0,t.width,t.height),n.drawImage(m,t.width-s,0,t.width,t.height);const i=e.x*.15%t.width,c=3;n.drawImage(y,t.width*.5-i,t.height*.1/c,t.width*.3*c,t.height*.3*c);const a=e.x*.3%t.width;n.drawImage(l,-a,0,t.width,t.height),n.drawImage(l,t.width-a,0,t.width,t.height),n.fillStyle="#222",n.fillRect(0,t.height-10,t.width,10);let r;switch(e.state){case"walk":r=P;break;case"crouch":r=b;break;case"stand":r=A;break;case"jump":r=L;break;default:r=k}const[o,f,O,j]=G(r,e.frameIndex),x=1.5,I=e.height*x,h=e.width*x,u=e.x,C=e.y+e.height-I;n.save(),e.facing===-1&&(n.translate(u+h/2,0),n.scale(-1,1),n.translate(-u-h/2,0)),n.drawImage(g,o,f,O,j,u,C,h,I),n.restore()}let v=performance.now();function R(s=performance.now()){const i=Math.min((s-v)/1e3,.05);v=s,D(i),M(),requestAnimationFrame(R)}async function H(){const s=[g,p,y,l,m];await Promise.all(s.map(i=>new Promise(c=>{i.complete?c():i.onload=()=>c()})))}async function X(){W(),await H(),R()}X();
